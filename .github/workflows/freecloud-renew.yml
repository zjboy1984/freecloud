name: FreeCloud è‡ªåŠ¨ç»­æœŸ (æµ‹è¯•æ¨¡å¼)
# æµ‹è¯•æ—¶é—´: 2025-06-21 - æµ‹è¯•scheduleè§¦å‘å™¨è¡Œä¸º

on:
  workflow_dispatch:
    inputs:
      force_run:
        description: 'è·³è¿‡å»¶è¿Ÿæ‰§è¡Œ'
        required: false
        default: true
        type: boolean
  schedule:
    - cron: "*/5 * * * *"  # æ¯å¤©æ—©ä¸Š10ç‚¹ï¼ˆUTC+8åŒ—äº¬æ—¶é—´ï¼‰æ‰§è¡Œï¼Œå»ºè®®å¤§å®¶éšæœºä¿®æ”¹â€œ2â€è¿™ä¸ªæ—¶é—´ï¼Œä¸ä¸€å®šè¦è·Ÿæˆ‘ä¸€æ ·
  # ç§»é™¤pushå’Œpull_requestè§¦å‘å™¨ï¼Œåªä¿ç•™æ‰‹åŠ¨è§¦å‘å’Œå®šæ—¶è§¦å‘
  # push:
  #   branches: [ service ]
  # pull_request:
  #   branches: [ service ]

jobs:
  renew:
    runs-on: ubuntu-latest
    # å…è®¸æ‰‹åŠ¨æ‰§è¡Œå’Œå®šæ—¶æ‰§è¡Œ
    if: github.event_name == 'workflow_dispatch' || (github.event_name == 'schedule' && github.ref == 'refs/heads/service')

    steps:
      - name: æ£€å‡ºä»£ç 
        uses: actions/checkout@v4
        with:
          ref: service  # å¼ºåˆ¶æ£€å‡ºserviceåˆ†æ”¯

      - name: æµ‹è¯•æ¨¡å¼ - è·³è¿‡ç¯å¢ƒè®¾ç½®
        run: echo "ğŸ§ª æµ‹è¯•æ¨¡å¼ï¼šè·³è¿‡Node.jså’Œä¾èµ–å®‰è£…"

      - name: æµ‹è¯•æ¨¡å¼ - è·³è¿‡å»¶è¿Ÿ
        run: echo "ğŸ§ª æµ‹è¯•æ¨¡å¼ï¼šè·³è¿‡å»¶è¿Ÿæ­¥éª¤"

      - name: æµ‹è¯•æ¨¡å¼ - è·³è¿‡å®é™…ç»­æœŸ
        run: |
          echo "ğŸ§ª æµ‹è¯•æ¨¡å¼ï¼šScheduleè§¦å‘å™¨éªŒè¯"
          echo "â° è§¦å‘æ—¶é—´ï¼š$(date)"
          echo "ğŸ”§ äº‹ä»¶ç±»å‹ï¼š${{ github.event_name }}"
          echo "ğŸŒ¿ åˆ†æ”¯ï¼š${{ github.ref }}"
          echo "âœ… å·¥ä½œæµæˆåŠŸè¿è¡Œï¼Œè·³è¿‡å®é™…ç»­æœŸæ“ä½œ"
